## 目录

- [1. 项目结构](#1-项目结构)
- [2. 调用层次](#2-调用层次)
- [3. 代码逻辑](#3-代码逻辑)
- [4. 待开发项](#4-待开发项)
- [5. 命名规范](#5-命名规范)
- [6. 提交规范](#6-提交规范)


## 1. 项目结构

项目的文件和目录结构如下：

- src：源代码
  - common：通用代码
  - video_api：视频API
  - ws_api：Websocket API
  - http_api：HTTP API
  - http_server：HTTP服务
  - log：日志
  - index.js：启动程序
- test：测试代码
- lib：依赖的库文件
- doc：文档
- config：配置文件
- scripts：脚本文件
- release：发布版本
- README.md：项目简介
- package.json：项目配置

## 2. 调用层次

将调用层次分为六层，上层可以调用下层，下层不能调用上层。

| 层次 | 内容 |
|---------|---------|
| 1 | index.js |
| 2 | http_server |
| 3 | http_api、ws_api、video_api |
| 4 | log |
| 5 | common |
| 6 | lib、config |

## 3. 代码逻辑

（1）核心代码有五个对象组成，这五个对象为：HTTP服务对象、HTTP-API对象、WebSocket-API对象、视频流-API对象、日志对象。

（2）这五个对象全部使用单例设计模式实现，保证对象的唯一性。

（3）HTTP服务对象和日志对象在KVM开机时便启动。

（4）HTTP-API对象、WebSocket-API对象、视频流-API对象在启动服务时才启动。

（5）所有的API都有三部分内容组成：密钥、一次性密码、具体的请求内容

## 4. 待开发项

以下是项目的未完成部分，以及未来的开发计划：

- [ ] 自启动方案
- [ ] 开机生成设备编码和密钥
- [ ] 请求API时校验密钥和一次性密码
- [ ] 启动服务API，返回一次性密码
- [ ] 关闭服务API，一次性密码失效
- [ ] 键盘API
- [ ] 鼠标API
- [ ] 视频API
- [ ] 远程开关机API
- [ ] 调整图像分辨率比例
- [ ] 打包

## 5. 命名规范

在编程中，常见的命名规则有以下几种：

驼峰命名法：第一个单词以小写字母开始，后续单词的首字母大写。例如：firstName。

帕斯卡命名法：所有单词的首字母都大写。例如：FirstName。

下划线命名法：单词之间使用下划线（_）连接，所有字母都小写。例如：first_name。

短划线命名法：单词之间使用短划线（-）连接，所有字母都小写。例如：first-name。

常量命名法：所有字母都大写，单词之间使用下划线（_）连接。例如：FIRST_NAME。

|命名内容|命名约定|举例|
|--|--|--|
|枚举类型|帕斯卡命名法|Direction|
|枚举值|常量命名法|UP_LEFT|
|常量|常量命名法|MATH_VALUE|
|类|帕斯卡命名法|HttpServer|
|类的属性|驼峰命名法，加下划线前缀|_value|
|类的取存值函数|驼峰命名法|value|
|类的私有方法|驼峰命名法，加下划线前缀|_test()|
|类的公共方法|驼峰命名法|test()|
|类的私有静态属性|驼峰命名法，加下划线前缀|_value|
|类的公共静态属性|驼峰命名法|value|
|类的私有静态方法|驼峰命名法，加下划线前缀|_test()|
|类的公共静态方法|驼峰命名法|test()|
|全局变量|驼峰命名法|value|
|局部变量|驼峰命名法|value|
|函数名|驼峰命令法|runServer()|
|文件名|下划线命名法|http_server.js|

## 6. 提交规范

推荐格式如下：
```
<type>: <subject>
```
`type` 是改动类别，有以下选项：

- `feature` 或 `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档改动
- `style`: 格式（不影响代码运行的变动）
- `refactor`: 重构（即不是新增功能，也不是修改 bug 的代码变动）
- `test`: 增加测试
- `merge`: 代码合并
- `revert`: 回滚到某次提交
- `build`: 用于更新构建配置、开发工具等
- `chore`: 杂项，其它与功能无关的更改

`subject` 就是 commit 的简短描述，建议不超过 50 个字符。